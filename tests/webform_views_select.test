<?php
/**
 * @file
 * Contains WebformViewsSelectViewEnabledTestCase.
 */

/**
 * Test that a view only appears in the webform select list if it is enabled.
 */
class WebformViewsSelectViewEnabledTestCase extends DrupalWebTestCase {

  /**
   * {@inheritdoc}
   */
  public function setUp() {
    parent::setUp('webform', 'views', 'webform_views_select', 'webform_views_select_test_view');
  }

  /**
   * Test that a enabled view is listed as an options source.
   */
  public function testEnabledView() {
    $items = webform_views_select_webform_select_options_info();
    $message = 'Enabled view is listed in the select options info.';
    $this->assertTrue(isset($items['webform_views_select_test_view-webform_select_1']), $message);
  }

  /**
   * Test that a disabled view is not listed as an options source.
   */
  public function testDisabledView() {
    // Disable the view.
    config_set('views.view.webform_views_select_test_view', 'disabled', array(FALSE));

    $items = webform_views_select_webform_select_options_info();
    $message = 'Disabled view is not listed in the select options info.';
    $this->assertFalse(isset($items['webform_views_select_test_view-webform_select_1']), $message);
  }
}
